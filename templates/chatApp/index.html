{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Club Almacén - Plataforma de Comerciantes</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Plataforma para crear comunidad de comerciantes de barrio. Beneficios, capacitaciones, directorios y más.">
  <link rel="icon" type="image/x-icon" href="{% static 'images/icon/favicon.png' %}" />
  
  <!-- CSS Consolidado -->
  <link rel="stylesheet" href="{% static 'css/main.css' %}" />
  <link rel="stylesheet" href="{% static 'css/landing.css' %}" />
  <link rel="stylesheet" href="{% static 'css/elalmacen.css' %}" />
  <link rel="stylesheet" href="{% static 'css/modals-chat.css' %}" />
</head>
<body>
  <!-- ==================== TOPBAR UNIFICADO ==================== -->
  <div class="topbar">
    <!-- Sección superior con horario y acciones rápidas -->
    <div class="topbar-top">
      <div class="container">
        <div class="topbar-schedule">
          📅 Horario: Lunes a Viernes de 09:30 a 14:00 y de 15:00 a 18:00hrs.
        </div>
        <div class="top-actions">
          <a class="btn-cta btn-demo" href="#demo">Descargar Demo Gratis</a>
          <a class="btn-cta btn-quote" href="#beneficios">Cotizar</a>
          <a class="btn-cta btn-contact" href="#contacto">Contáctenos</a>
        </div>
      </div>
    </div>

    <!-- Sección principal con navegación -->
    <div class="topbar-main">
      <div class="container">
        <a href="#" class="topbar-brand">
          🏪 Club Almacén
        </a>

        <nav class="topbar-nav">
          <a href="#" class="active">INICIO</a>
          <a href="#beneficios">BENEFICIOS</a>
          <a href="#noticias">NOTICIAS</a>
          <a href="#directorio">DIRECTORIO</a>
          <a href="#capacitaciones">CAPACITACIONES</a>
          <a href="#nuevos">NUEVOS COMERCIOS</a>
          <a href="#kits">KITS POS</a>
          <a href="#enlaces">ENLACES ÚTILES</a>
        </nav>

        <div class="topbar-actions">
          {% if user.is_authenticated %}
          <div class="user-info">
            👤 <strong>{{ user.username }}</strong>
          </div>
          {% endif %}
          
          <button class="menu-btn" id="menuBtn" title="Menú">☰</button>
          
          <div class="menu-dropdown" id="menuDropdown">
            {% if user.is_authenticated %}
            <button id="profileBtn">👤 Mi Perfil</button>
            <button id="favoritesBtn">⭐ Mis Favoritos</button>
            <button id="logoutBtn">🚪 Cerrar sesión</button>
            {% else %}
            <button id="loginBtn">🔑 Iniciar sesión</button>
            <button id="registerBtn">✍️ Registrarse</button>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== CONTENIDO PRINCIPAL ==================== -->
  
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1>Bienvenido a Club Almacén</h1>
      <p class="lead">La comunidad digital que fortalece a los comerciantes de barrio en Chile</p>
      <div class="hero-buttons">
        <a href="#beneficios" class="btn btn-primary">Ver Beneficios</a>
        <a href="#register" class="btn btn-secondary">Unirme Ahora</a>
      </div>
    </div>
  </section>

  <!-- Sección Beneficios -->
  <section id="beneficios" class="features">
    <div class="container">
      <h2>Beneficios para Comerciantes</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="icon">🎁</div>
          <h3>Concursos y Sorteos</h3>
          <p>Participa en concursos exclusivos y gana premios para tu negocio.</p>
        </div>
        <div class="feature-card">
          <div class="icon">📚</div>
          <h3>Capacitaciones</h3>
          <p>Accede a charlas, webinars y capacitaciones gratuitas para mejorar tu negocio.</p>
        </div>
        <div class="feature-card">
          <div class="icon">💰</div>
          <h3>Descuentos Especiales</h3>
          <p>Obtén descuentos exclusivos con proveedores y en productos para tu almacén.</p>
        </div>
        <div class="feature-card">
          <div class="icon">🤝</div>
          <h3>Red de Contactos</h3>
          <p>Conéctate con otros comerciantes y proveedores de confianza.</p>
        </div>
        <div class="feature-card">
          <div class="icon">📱</div>
          <h3>Software POS</h3>
          <p>Accede a tecnología de punto de venta diseñada para tu negocio.</p>
        </div>
        <div class="feature-card">
          <div class="icon">🤖</div>
          <h3>Asistente IA</h3>
          <p>Consulta con nuestro asistente virtual especializado en comercio.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección Noticias -->
  <section id="noticias" class="uses">
    <div class="container">
      <h2>Noticias y Actualidad</h2>
      <p style="text-align: center; margin-bottom: 40px;">Mantente informado con las últimas noticias del sector</p>
      <div class="uses-grid">
        <div class="use-case">
          <h3>📰 Noticias Nacionales</h3>
          <ul>
            <li>Actualidad económica</li>
            <li>Cambios en legislación</li>
            <li>Tendencias de consumo</li>
          </ul>
        </div>
        <div class="use-case">
          <h3>📱 Redes Sociales</h3>
          <ul>
            <li>Facebook e Instagram</li>
            <li>YouTube y TikTok</li>
            <li>Contenido especializado</li>
          </ul>
        </div>
        <div class="use-case">
          <h3>🏛️ Servicios Públicos</h3>
          <ul>
            <li>SII y trámites fiscales</li>
            <li>Fonasa y Previred</li>
            <li>Municipalidades</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección Nuevos Comercios -->
  <section id="nuevos" class="requirements">
    <div class="container">
      <h2>¿Estás empezando tu negocio?</h2>
      <div class="requirements-content">
        <div class="requirements-text">
          <p>Te ayudamos en cada paso:</p>
          <ul>
            <li>Guía de trámites legales</li>
            <li>Ideas de negocio</li>
            <li>Contacto con proveedores</li>
            <li>Tecnología y software</li>
            <li>Asesoría inicial gratuita</li>
          </ul>
          <a href="#register" class="btn btn-primary" style="margin-top: 20px;">Comenzar Ahora</a>
        </div>
        <div class="requirements-image">
          <img src="{% static 'images/nuevos-comercios.jpg' %}" alt="Nuevos comercios">
        </div>
      </div>
    </div>
  </section>

  <!-- Kits POS Section -->
  <section id="kits" class="elal-section">
    <div class="elal-container">
      <h2>Kits de Punto de Venta 2025</h2>
      <p>Digitaliza tu negocio con nuestros kits completos de hardware y software</p>

      <div class="elal-gallery">
        <div class="elal-card">
          <img src="{% static 'images/landing/kit-pos-sercotec-200-1024x1024.png' %}" alt="kit pos">
          <p>Kit POS Sercotec</p>
        </div>
        <div class="elal-card">
          <img src="{% static 'images/landing/sercotec.png' %}" alt="sercotec">
          <p>Sercotec</p>
        </div>
        <div class="elal-card">
          <img src="{% static 'images/landing/aio-ach.png' %}" alt="aio">
          <p>Computador AIO</p>
        </div>
      </div>

      <p class="elal-footer-small">¿Ganaste el concurso ALMACENES DE CHILE? Solicita tu cotización aquí.</p>
    </div>
  </section>

  <!-- Boleta Electrónica -->
  <section id="boleta" class="elal-boleta">
    <div class="boleta-inner">
      <div class="boleta-img">
        <img src="{% static 'images/landing/boleta-pos.png' %}" alt="Boleta Electrónica">
      </div>
      <div class="boleta-content">
        <h2>Boleta Electrónica de Club Almacén</h2>
        <p>Servicio de pago anual conveniente. Imprime boletas electrónicas con el software El Almacén, incluso sin Internet. Al recuperar conexión, sincroniza directamente con el SII sin costos de intermediarios.</p>
        <a class="btn-more" href="#contacto">MÁS INFORMACIÓN</a>
      </div>
    </div>
  </section>

  <!-- Features Row -->
  <section class="elal-features">
    <div class="elal-feat-grid">
      <div class="elal-feat">
        <div class="icon">🧾</div>
        <h4>Boletas Ilimitadas</h4>
        <p>Sin límites, fáciles de emitir</p>
      </div>
      <div class="elal-feat">
        <div class="icon">🔓</div>
        <h4>Licencia de Por Vida</h4>
        <p>Pago único con soporte incluido</p>
      </div>
      <div class="elal-feat">
        <div class="icon">👍</div>
        <h4>Fácil de Usar</h4>
        <p>Interfaz simple y rápida</p>
      </div>
    </div>
  </section>

  <!-- Sección Streaming y Capacitaciones -->
  <section id="capacitaciones" class="demo">
    <div class="container">
      <h2>Capacitaciones y Eventos en Vivo</h2>
      <div style="max-width: 800px; margin: 0 auto; background: rgba(255,255,255,0.95); padding: 40px; border-radius: 16px;">
        <div style="text-align: center; margin-bottom: 30px;">
          <div class="icon" style="font-size: 4rem; margin-bottom: 20px;">📺</div>
          <h3 style="color: #333; margin-bottom: 16px;">Próximos Eventos</h3>
          <p style="color: #666;">Únete a nuestras charlas y capacitaciones online en vivo</p>
        </div>
        <ul style="list-style: none; padding: 0; color: #333;">
          <li style="padding: 12px 0; border-bottom: 1px solid #eee;">📅 Martes 15:00 - Gestión de Inventario</li>
          <li style="padding: 12px 0; border-bottom: 1px solid #eee;">📅 Jueves 16:00 - Marketing Digital</li>
          <li style="padding: 12px 0; border-bottom: 1px solid #eee;">📅 Viernes 10:00 - Finanzas para el Comercio</li>
        </ul>
        <a href="#register" class="btn btn-primary" style="width: 100%; margin-top: 30px; display: block; text-align: center;">Ver Calendario Completo</a>
      </div>
    </div>
  </section>

  <!-- Enlaces Útiles -->
  <section id="enlaces" class="elal-green">
    <div class="green-inner">
      <div class="green-copy">
        <h2>Enlaces Útiles</h2>
        <p>Accede rápidamente a los servicios más utilizados por comerciantes:</p>
        <ul style="list-style: none; padding: 0; margin: 20px 0;">
          <li style="padding: 8px 0;">🏦 Bancos y pago de cuentas</li>
          <li style="padding: 8px 0;">📋 SII y trámites fiscales</li>
          <li style="padding: 8px 0;">🏛️ Servicios municipales</li>
          <li style="padding: 8px 0;">📱 Proveedores y servicios</li>
        </ul>
        <a class="elal-cta" href="#register">PERSONALIZAR MIS ENLACES</a>
      </div>
      <div class="green-image">
        <img src="{% static 'images/landing/requeriments.png' %}" alt="Enlaces útiles">
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contacto" class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Club Almacén</h4>
          <p>Fortaleciendo a los comerciantes de barrio desde 1999</p>
          <p>Email: contacto@clubalmacen.com</p>
          <p>WhatsApp: +56 9 XXXX XXXX</p>
        </div>
        <div class="footer-section">
          <h4>Enlaces Rápidos</h4>
          <a href="#beneficios">Beneficios</a>
          <a href="#noticias">Noticias</a>
          <a href="#kits">Kits POS</a>
          <a href="#capacitaciones">Capacitaciones</a>
        </div>
        <div class="footer-section">
          <h4>Síguenos</h4>
          <div class="social-links">
            <a href="#" target="_blank">Facebook</a>
            <a href="#" target="_blank">Instagram</a>
            <a href="#" target="_blank">YouTube</a>
          </div>
        </div>
        <div class="footer-section">
          <h4>Legal</h4>
          <a href="#">Términos y condiciones</a>
          <a href="#">Política de privacidad</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Club Almacén. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- ==================== MODALES ====================  -->

  <!-- Modal Login -->
  <div class="modal-overlay" id="loginOverlay"></div>
  <div class="modal" id="loginModal">
    <form id="loginForm">
      <h3>Iniciar sesión</h3>
      <input type="email" id="loginEmail" placeholder="Correo electrónico" required />
      <div style="display: flex; gap: 8px;">
        <input type="password" id="loginPassword" placeholder="Contraseña" required style="flex: 1;" />
        <button type="button" class="password-toggle" id="showLoginPassword" onclick="togglePasswordVisibility('loginPassword')">👁️</button>
      </div>
      <button type="submit">Entrar</button>
      <button type="button" id="closeLogin">Cerrar</button>
    </form>
  </div>

  <!-- Modal Registro -->
  <div class="modal-overlay" id="registerOverlay"></div>
  <div class="modal" id="registerModal">
    <form id="registerForm">
      <h3>Registrarse en Club Almacén</h3>
      <input type="text" id="registerName" placeholder="Nombre y Apellido" required />
      <input type="email" id="registerEmail" placeholder="Correo electrónico" required />
      <input type="tel" id="registerWhatsapp" placeholder="WhatsApp (ej: +56912345678)" required />
      <select id="registerRole" required>
        <option value="">Relación con el negocio</option>
        <option value="dueno">Dueño</option>
        <option value="conyuge">Cónyuge</option>
        <option value="hijo">Hijo/a</option>
        <option value="trabajador">Trabajador</option>
      </select>
      <select id="registerType" required>
        <option value="">Tipo de negocio</option>
        <option value="almacen">Almacén</option>
        <option value="minimarket">Minimarket</option>
        <option value="botilleria">Botillería</option>
        <option value="panaderia">Panadería</option>
        <option value="otro">Otro</option>
      </select>
      <div style="display: flex; gap: 8px;">
        <input type="password" id="registerPassword" placeholder="Contraseña" required style="flex: 1;" />
        <button type="button" class="password-toggle" id="showRegisterPassword" onclick="togglePasswordVisibility('registerPassword', 'registerPasswordConfirm')">👁️</button>
      </div>
      <input type="password" id="registerPasswordConfirm" placeholder="Confirmar contraseña" required />
      <button type="submit">Registrar</button>
      <button type="button" id="closeRegister">Cerrar</button>
    </form>
  </div>

  <!-- Chat Popup -->
  <div id="chatOverlay">
    <div class="chat-container" id="chatContainer" role="dialog" aria-label="Chat">
      <button id="close-chat">✖</button>
      
      <div class="chat-header">
        Chat Comunidad
        <div id="datetime"></div>
      </div>

      <div class="tabs" id="tabs">
        <div class="tab active" data-tab="nacional">Nacional</div>
        <div class="tab" data-tab="regional">Regional</div>
        <div class="tab" data-tab="soporte">Soporte</div>
      </div>

      <div class="messages" id="messages"></div>

      <div class="input-row">
        <input type="text" id="msgInput" placeholder="Escribe un mensaje..." />
        <button id="sendBtn">Enviar</button>
      </div>
    </div>
  </div>

  <!-- Chat Toggle Button -->
  <button id="toggle-chat" class="chat-toggle">Chat</button>

  <!-- CSRF Form -->
  <form id="csrf-form" style="display: none">{% csrf_token %}</form>

  <!-- Variable global -->
  <script>
    window.currentUsername = "{% if user.is_authenticated %}{{ user.username }}{% endif %}";
  </script>

  <!-- Scripts -->
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/chat.js' %}"></script>
</body>
</html>